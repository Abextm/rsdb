<script>
	var Raw=[
["Monkeys",6,15,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
["Goblins",7,15,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
["Rats",7,15,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
["Spiders",6,15,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
["Birds",6,15,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
["Cows",8,15,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
["Scorpions",7,15,50,7,40,70,0,0,0,0,0,0,0,0,0,0,0,0],
["Bats",7,15,50,7,40,70,0,0,0,0,0,0,0,0,0,0,0,0],
["Wolves",7,15,50,7,40,70,0,0,0,0,0,0,0,0,0,0,0,0],
["Zombies",7,15,50,7,40,70,0,0,0,0,0,0,0,0,0,0,0,0],
["Skeletons",7,15,50,7,40,70,0,0,0,0,0,0,0,0,0,0,0,0],
["Ghosts",7,15,50,7,40,70,0,0,0,0,0,0,0,0,0,0,0,0],
["Bears",7,15,50,6,40,70,0,0,0,0,0,0,0,0,0,0,0,0],
["Hill Giants",0,0,0,7,40,70,7,60,120,0,0,0,0,0,0,0,0,0],
["Ice Giants",0,0,0,0,0,0,7,40,80,0,0,0,0,0,0,0,0,0],
["Fire Giants",0,0,0,0,0,0,7,60,120,12,110,170,9,120,185,7,130,200],
["Moss Giants",0,0,0,0,0,0,7,60,120,0,0,0,0,0,0,0,0,0],
["Trolls",0,0,0,0,0,0,7,60,120,11,110,170,6,120,185,6,130,200],
["Ice Warriors",0,0,0,7,40,70,7,60,120,0,0,0,0,0,0,0,0,0],
["Ogres",0,0,0,0,0,0,7,60,120,0,0,0,0,0,0,0,0,0],
["Hobgoblins",0,0,0,7,40,70,7,60,120,0,0,0,0,0,0,0,0,0],
["Dogs",7,15,50,7,40,70,0,0,0,0,0,0,0,0,0,0,0,0],
["Ghouls",0,0,0,7,10,20,7,10,40,0,0,0,0,0,0,0,0,0],
["Green Dragons",0,0,0,0,0,0,6,40,80,0,0,0,0,0,0,0,0,0],
["Blue Dragons",0,0,0,0,0,0,7,60,120,8,110,170,4,120,185,4,110,170],
["Red Dragons",0,0,0,0,0,0,0,0,0,0,0,0,5,30,80,8,30,65],
["Black Dragons",0,0,0,0,0,0,0,0,0,0,0,0,6,10,20,9,10,20],
["Lesser Demons",0,0,0,0,0,0,7,60,120,9,110,170,0,0,0,0,0,0],
["Greater Demons",0,0,0,0,0,0,0,0,0,9,110,170,7,120,185,9,130,200],
["Black Demons",0,0,0,0,0,0,0,0,0,10,110,170,9,120,185,8,130,200],
["Hellhounds",0,0,0,0,0,0,7,40,80,9,110,170,8,120,185,10,130,200],
["Shadow Warriors",0,0,0,0,0,0,8,40,80,8,110,170,0,0,0,0,0,0],
["Werewolves",0,0,0,0,0,0,7,40,80,0,0,0,0,0,0,0,0,0],
["Vampires",0,0,0,6,10,20,7,10,20,0,0,0,0,0,0,0,0,0],
["Dagannoth",0,0,0,0,0,0,7,60,120,11,110,170,8,120,185,9,130,200],
["Turoth",0,0,0,0,0,0,8,60,120,10,110,170,3,120,185,0,0,0],
["Cave Crawlers",8,15,50,8,40,70,7,60,120,5,110,170,0,0,0,0,0,0],
["Banshees",8,15,50,8,40,70,6,60,120,5,110,170,0,0,0,0,0,0],
["Crawling Hands",8,15,50,8,40,70,6,60,120,0,0,0,0,0,0,0,0,0],
["Infernal Mages",0,0,0,0,0,0,8,60,120,7,110,170,0,0,0,0,0,0],
["Aberrant Spectres",0,0,0,0,0,0,8,60,120,8,110,170,6,120,185,7,130,200],
["Abyssal Demons",0,0,0,0,0,0,5,60,120,12,110,170,9,120,185,12,130,200],
["Basilisks",0,0,0,0,0,0,8,60,120,7,110,170,0,0,0,0,0,0],
["Cockatrice",0,0,0,8,40,70,8,60,120,6,110,170,0,0,0,0,0,0],
["Kurask",0,0,0,0,0,0,7,60,120,12,110,170,3,120,185,4,130,200],
["Gargoyles",0,0,0,0,0,0,5,60,120,11,110,170,6,120,185,8,130,200],
["Pyrefiends",0,0,0,8,40,70,8,60,120,6,110,170,0,0,0,0,0,0],
["Bloodveld",0,0,0,0,0,0,8,60,120,8,110,170,9,120,185,8,130,200],
["Dust Devils",0,0,0,0,0,0,8,60,120,9,110,170,6,120,185,5,130,200],
["Jellies",0,0,0,0,0,0,8,60,120,10,110,170,0,0,0,0,0,0],
["Rockslugs",0,0,0,8,40,70,7,60,120,5,110,170,0,0,0,0,0,0],
["Nechryael",0,0,0,0,0,0,5,60,120,12,110,170,7,110,170,9,130,200],
["Kalphite",6,15,50,6,40,70,7,60,120,11,110,170,9,120,185,9,130,200],
["Earth Warriors",0,0,0,6,40,70,6,40,80,0,0,0,0,0,0,0,0,0],
["Otherworldly Beings",0,0,0,0,0,0,8,60,120,0,0,0,0,0,0,0,0,0],
["Elves",0,0,0,0,0,0,7,40,100,8,110,170,4,60,90,4,110,170],
["Dwarves",7,15,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
["Bronze Dragons",0,0,0,0,0,0,7,10,20,11,10,20,0,0,0,0,0,0],
["Iron Dragons",0,0,0,0,0,0,0,0,0,12,25,45,5,30,60,5,40,60],
["Steel Dragons",0,0,0,0,0,0,0,0,0,9,10,20,5,30,60,7,10,20],
["Wall Beasts",0,0,0,7,10,20,6,10,20,6,10,20,0,0,0,0,0,0],
["Cave Slimes",8,10,20,8,10,20,7,10,20,6,10,20,0,0,0,0,0,0],
["Cave Bugs",8,10,20,8,10,20,7,10,20,0,0,0,0,0,0,0,0,0],
["Shades",0,0,0,8,40,70,8,60,120,0,0,0,0,0,0,0,0,0],
["Crocodiles",0,0,0,0,0,0,6,60,120,0,0,0,0,0,0,0,0,0],
["Dark Beasts",0,0,0,0,0,0,0,0,0,0,0,0,5,10,20,11,10,20],
["Mogres",0,0,0,8,40,70,7,60,120,6,110,170,0,0,0,0,0,0],
["Desert Lizards",8,15,50,8,40,70,7,60,120,5,110,170,0,0,0,0,0,0],
["Fever Spiders",0,0,0,0,0,0,7,60,120,7,110,170,0,0,0,0,0,0],
["Harpie Bug Swarms",0,0,0,0,0,0,8,60,120,6,110,170,0,0,0,0,0,0],
["Sea Snakes",0,0,0,0,0,0,6,60,120,0,0,0,0,0,0,0,0,0],
["Skeletal Wyverns",0,0,0,0,0,0,0,0,0,7,10,20,5,5,15,7,20,40],
["Killerwatts",0,0,0,6,30,80,6,30,80,0,0,0,0,0,0,0,0,0],
["Mutated Zygomites",0,0,0,0,0,0,0,0,0,7,8,15,2,10,25,2,20,30],
["Icefiends",8,15,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
["Minotaurs",7,10,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
["Fleshcrawlers",0,0,0,7,15,25,0,0,0,0,0,0,0,0,0,0,0,0],
["Catablepon",0,0,0,8,20,30,0,0,0,0,0,0,0,0,0,0,0,0],
["Ankou",0,0,0,0,0,0,7,25,35,0,0,0,5,50,90,5,50,80],
["Cave Horrors",0,0,0,0,0,0,0,0,0,10,110,170,5,120,180,4,130,200],
["Jungle Horrors",0,0,0,0,0,0,8,60,120,10,110,170,0,0,0,0,0,0],
["Goraks",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
["Suqahs",0,0,0,0,0,0,0,0,0,0,0,0,8,120,185,8,60,90],
["Brine Rats",0,0,0,0,0,0,7,60,120,7,110,170,3,120,185,0,0,0],
["Minions of Scabaras",0,0,0,0,0,0,0,0,0,0,0,0,4,30,60,0,0,0],
["Terror Dogs",0,0,0,0,0,0,6,20,45,0,0,0,0,0,0,0,0,0],
["Molanisks",0,0,0,0,0,0,7,39,50,6,39,50,0,0,0,0,0,0],
["Waterfiends",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,130,200],
["Spiritual Creatures",0,0,0,0,0,0,8,60,120,12,110,170,6,120,185,7,130,200],
["Lizardmen",0,0,0,0,0,0,0,0,0,8,70,90,8,90,120,10,130,210],
["Mithril Dragons",0,0,0,0,0,0,0,0,0,0,0,0,5,4,8,9,5,10],
["Aviansies",0,0,0,0,0,0,0,0,0,9,110,170,6,120,185,8,120,200],
["Cave Kraken",0,0,0,0,0,0,0,0,0,12,30,50,6,100,120,9,100,120],
["Smoke Devils",0,0,0,0,0,0,0,0,0,0,0,0,7,120,185,9,130,200],
["TzHaar",0,0,0,0,0,0,0,0,0,0,0,0,10,110,180,10,130,199],
["TzTok-Jad",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
["Bosses",0,0,0,0,0,0,0,0,0,0,0,0,8,3,35,12,3,35]
];
var Masters=["Turael","Mazchna","Vannaka","Chaeldar","Nieve","Duradel"];
</script>
<rsdb-title>Slayer</rsdb-title>
<div id="table" class="linetable"><div></div></div>
<br>
<div id="otable"></div>
<script>
var block;
var good;
function calc(){
	if(!block){
		try{
			block=JSON.parse(localStorage["slayer_blocks"]);
		}catch(_){
			block=Raw.map(v=>0);
		}
	}else{
		block=Raw.map(v=>~~(document.getElementById("slayer_blk_"+v[0].replace(" ","_"))||{checked:0}).checked);
	}
	localStorage["slayer_blocks"]=JSON.stringify(block);
	if(!good){
		try{
			good=JSON.parse(localStorage["slayer_good"]);
		}catch(_){
			good=Raw.map(v=>0);
		}
	}else{
		good=Raw.map(v=>~~(document.getElementById("slayer_ok_"+v[0].replace(" ","_"))||{checked:0}).checked);
	}
	localStorage["slayer_good"]=JSON.stringify(good);
	var w = Raw.map((v,mi)=>Masters.map((_,i)=>block[mi]?0:v[i*3+1]));
	var tp = w.reduce((acc,val)=>acc.map((v,i)=>v+val[i]));
	w=w.map(v=>v.map((v,i)=>v/tp[i]));
	console.log(w);
	var goodSum = Masters.map((_,i)=>w.filter((_,i)=>good[i]).map(v=>v[i]).reduce((p,v)=>p+v,0));
	var table = document.getElementById("table").children[0];
	replaceSortedTable(table,[
		"<table>",
			"<tr><th><rsdb-sort>",
				["Monster"].concat(Masters).concat(["â˜º","X"]).join("</rsdb-sort></th><th><rsdb-sort>"),
			"</rsdb-sort></th></tr><tr><td>",
				Raw.map((v,mi)=>[v[0]].concat(
					Masters.map((_,i)=>"<rsdb-num precision='2'>"+w[mi][i]*100+"</rsdb-num>")
					).concat([
						"<input onchange='calc()' nopersist type='checkbox' id='slayer_ok_"+v[0].replace(" ","_")+"'"+(good[mi]?" checked='checked'":"")+" title='Target'/>",
						"<input onchange='calc()' nopersist type='checkbox' id='slayer_blk_"+v[0].replace(" ","_")+"'"+(block[mi]?" checked='checked'":"")+" title='Unavailable'/>",
					]).join("</td><td>"))
				.join("</td></tr><tr><td>"),
		"</table>",
	].join(""));
	document.getElementById("otable").innerHTML= [
		"<table>",
			"<tr><th>",
				[""].concat(Masters).join("</th><th>"),
			"</th></tr><tr><td>",
				"Sum(good)</td><td>"+goodSum.map(v=>"<rsdb-num precision='2'>"+v*100+"</rsdb-num>").join("</td><td>"),
			"</td></tr>",
		"</table>",
	].join("");

}
calc();
</script>
